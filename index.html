<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>GeoInvention 数据集中心 - 登录/注册</title>
  <script type="module" src="./main.js"></script>
</head>
<body>
  <h1>GeoInvention 数据集中心</h1>
  <p>请使用邮箱和密码注册或登录</p>

  <label>邮箱: <input type="email" id="email"></label><br>
  <label>密码: <input type="password" id="password"></label><br><br>

  <button id="registerBtn">注册</button>
  <button id="loginBtn">登录</button>

  <script type="module">
    import { auth } from './main.js';
    import {
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword
    } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");

    document.getElementById("registerBtn").addEventListener("click", async () => {
      try {
        const userCredential = await createUserWithEmailAndPassword(
          auth,
          emailInput.value,
          passwordInput.value
        );
        alert("注册成功！");
        window.location.href = "datasets.html";
      } catch (error) {
        alert("注册失败: " + error.message);
      }
    });

    document.getElementById("loginBtn").addEventListener("click", async () => {
      try {
        const userCredential = await signInWithEmailAndPassword(
          auth,
          emailInput.value,
          passwordInput.value
        );
        alert("登录成功！");
        window.location.href = "datasets.html";
      } catch (error) {
        alert("登录失败: " + error.message);
      }
    });
  </script>
</body>
</html>
